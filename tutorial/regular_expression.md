# 정규식 캡처 그룹 이해하기

정규식에서 `()`로 감싸진 부분을 캡처 그룹(Capture Group)이라고 하며, 매칭된 내용을 `$1`, `$2` 등으로 참조할 수 있습니다. 현재 프로젝트의 마크다운 → HTML 변환 로직을 예시로 캡처 그룹의 개념을 정리합니다.

---

## 1) 실전 예시: 목록 라인의 변환

```javascript
.replace(/^[\s]*[-*]\s+(.+)$/gm, '<div class="list-item">• $1</div>')
```

- `^`  줄의 시작에서
- `[\s]*`  공백이 0개 이상 있고 (스페이스, 탭 등)
- `[-*]`  하이픈(-) 또는 별표(*) 기호가 있고
- `\s+`  그 다음에 공백이 1개 이상 있으며
- `(.+)`  이 위치부터 줄 끝까지의 모든 문자를 “캡처”한다 → 이게 `$1`
- `$`  줄의 끝
- 치환 시 `<div class="list-item">• $1</div>`로 바꾸어, 글머리 기호를 `•`로 통일하고 내용은 `$1` 위치에 그대로 둡니다.

* g: 전역 검색. 문자열 전체에서 모든 매치를 찾음(첫 매치 후 멈추지 않음).
* m: 멀티라인 모드. ^, $가 문자열 전체의 시작/끝이 아니라 각 “줄”의 시작/끝에 매칭되도록 함.

* 예:/a/g → 모든 a 매칭
* /^# .+$/gm → 여러 줄 텍스트에서 각 줄의 시작이 # 로 시작하는 행들을 모두 매칭

예시 입력:
```
    * 데이터 수집 및 전처리
```
치환 결과:
```html
<div class="list-item">• 데이터 수집 및 전처리</div>
```

---

## 2) `$1`, `$2`, `$3`의 의미

- `$1`: 첫 번째 캡처 그룹에 매칭된 텍스트
- `$2`: 두 번째 캡처 그룹에 매칭된 텍스트
- `$3`: 세 번째 캡처 그룹에 매칭된 텍스트
- `$0`: 전체 매치(보통 잘 쓰지 않음)

번호는 **정규식 안에서 등장하는 괄호의 순서**로 매겨집니다.

```javascript
/정규식(첫번째)(두번째)(세번째)/
//      $1      $2      $3
```

---

## 3) 캡처 “단위”는 어떻게 정해지나?

캡처 그룹 `()` 앞뒤의 패턴들이 캡처할 **위치와 범위(단위)** 를 지정합니다. 즉, `(.+)` 자체는 “이 위치의 모든 문자”를 의미하고, 그 앞의 `^[\s]*[-*]\s+`가 “어디서부터 캡처를 시작할지”를 결정합니다.

비유: 주소 "서울시 강남구 **123번지**"에서
- "서울시 강남구" = 위치 지정자(캡처의 시작점을 찾아줌)
- "**123번지**" = 실제로 캡처하고 싶은 대상(캡처 그룹)

---

## 4) 프로젝트 내 다른 캡처 예시들

### a. 번호 목록: 숫자와 내용 분리
```javascript
.replace(/^[\s]*(\d+)[\.|\)]\s+(.+)$/gm,
  '<div class="numbered-item"><span class="number">$1.</span><span class="content">$2</span></div>')
```
- `(\d+)` → `$1`: 번호(숫자)
- `(.+)` → `$2`: 항목 내용

### b. 굵은 글씨(볼드)
```javascript
.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
```
- `([^*]+)` → `$1`: 별표가 아닌 문자들의 연속(굵게 표시할 텍스트)

### c. 기울임(이탤릭)
```javascript
.replace(/\*([^*]+)\*/g, '<em>$1</em>')
```
- `([^*]+)` → `$1`: 별표가 아닌 문자들의 연속(기울임 표시할 텍스트)

### d. 헤딩(제목)
```javascript
.replace(/^#### (.+)$/gm, '<h4>$1</h4>')
.replace(/^### (.+)$/gm, '<h3>$1</h3>')
.replace(/^## (.+)$/gm, '<h2>$1</h2>')
.replace(/^# (.+)$/gm, '<h1>$1</h1>')
```
- `(.+)` → `$1`: 제목 텍스트 전체

---

## 5) 캡처 그룹 설계 팁

- 캡처하고 싶은 **정확한 범위**만 `()`로 감싸세요. 나머지는 위치를 고정하기 위한 패턴으로 둡니다.
- 여러 그룹이 필요한 경우, **순서**에 유의하세요. `$1`, `$2` 등으로 치환 시 참조합니다.
- 줄 단위 처리가 필요하면 `m`(multiline) 플래그를, 전역 치환이 필요하면 `g` 플래그를 함께 사용하세요.

---

## 6) 빠른 레퍼런스

- `()`  캡처 그룹
- `(?:...)`  비캡처 그룹(참조하지 않을 때)
- `^`  줄의 시작, `$` 줄의 끝(`m` 플래그 사용 시 각 줄 기준)
- `\s` 공백 문자, `\d` 숫자, `.` 임의의 한 문자
- `+` 1회 이상, `*` 0회 이상, `?` 0 또는 1회, `{n,m}` n~m회

---

이 문서는 현재 프로젝트의 정규식 변환 로직을 이해하고 유지보수하는 데 도움이 되도록 작성되었습니다. 필요 시 예시를 추가하고, 실제 변경된 정규식도 함께 기록해 주세요.


